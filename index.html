<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>ZOMERD UNIVERSE | Ø¨Ø±Ø§Ø¡ Ø¹Ù…Ø±</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

    <style>
        :root {
            --p: #00d2ff; --bg: #020617; --card: rgba(15, 23, 42, 0.85); 
            --txt: #f8fafc; --border: rgba(0, 210, 255, 0.2);
        }

        /* Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© */
        body.theme-purple { --p: #a855f7; --bg: #0f0720; --border: rgba(168, 85, 247, 0.3); }
        body.theme-gold { --p: #fbbf24; --bg: #110d02; --border: rgba(251, 191, 36, 0.3); }
        body.theme-dark { --p: #ffffff; --bg: #000000; --border: rgba(255, 255, 255, 0.1); }
        
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Cairo', sans-serif; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        body { background: var(--bg); color: var(--txt); display: flex; height: 100vh; overflow: hidden; }

        #particles-js { position: fixed; inset: 0; z-index: -1; }

        /* Ø´Ø±ÙŠØ· Ø¹Ø§Ø¬Ù„ */
        .ticker-container { background: rgba(0,0,0,0.95); border-bottom: 1px solid var(--border); height: 40px; display: flex; align-items: center; z-index: 100; backdrop-filter: blur(10px); }
        .ticker-label { background: var(--p); color: #000; padding: 0 15px; font-weight: 900; font-size: 0.75rem; height: 100%; display: flex; align-items: center; box-shadow: 5px 0 15px rgba(0,0,0,0.3); }
        .ticker-wrapper { flex: 1; overflow: hidden; }
        .ticker-content { display: inline-block; white-space: nowrap; animation: ticker 25s linear infinite; }
        .ticker-content span { margin-right: 40px; color: var(--p); font-size: 0.8rem; font-weight: bold; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        aside { width: 280px; background: var(--card); border-left: 1px solid var(--border); display: flex; flex-direction: column; z-index: 1001; backdrop-filter: blur(20px); }
        @media (max-width: 768px) {
            aside { position: fixed; right: -280px; height: 100%; top: 0; }
            aside.open { right: 0; box-shadow: -20px 0 60px #000; }
        }

        .nav-link { padding: 12px 20px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; gap: 12px; color: #94a3b8; margin: 5px 15px; border: 1px solid transparent; }
        .nav-link.active { background: var(--p); color: #000; font-weight: 900; box-shadow: 0 0 15px var(--p); }
        .nav-link:hover:not(.active) { background: rgba(255,255,255,0.05); color: var(--p); }

        main { flex: 1; overflow-y: auto; display: flex; flex-direction: column; background: radial-gradient(circle at top right, rgba(0,210,255,0.03), transparent); }
        header { height: 65px; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; background: rgba(0,0,0,0.3); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 50; backdrop-filter: blur(5px); }

        .menu-btn { font-size: 1.3rem; color: var(--p); cursor: pointer; background: rgba(0,210,255,0.1); border: 1px solid var(--p); padding: 8px 12px; border-radius: 10px; display: none; }
        @media (max-width: 768px) { .menu-btn { display: block; } }

        .section { padding: 20px; display: none; max-width: 1100px; margin: 0 auto; width: 100%; opacity: 0; transform: translateY(10px); }
        .section.active { display: block; opacity: 1; transform: translateY(0); }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª */
        .posts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .post-card { background: var(--card); border-radius: 20px; overflow: hidden; border: 1px solid var(--border); cursor: pointer; position: relative; }
        .post-card:hover { transform: scale(1.02); border-color: var(--p); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .post-img { width: 100%; height: 160px; object-fit: cover; filter: brightness(0.9); }
        .post-info { padding: 15px; }

        /* Ø§Ù„Ø¨Ø­Ø« (ÙˆØ§Ø¶Ø­ Ø¬Ø¯Ø§Ù‹) */
        .search-container { position: relative; margin-bottom: 25px; }
        .inp-field { 
            width: 100%; padding: 16px; border-radius: 15px; border: 2px solid var(--border); 
            background: #000 !important; color: #fff !important; outline: none;
            font-size: 1.1rem; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .inp-field:focus { border-color: var(--p); box-shadow: 0 0 20px var(--p); }

        .btn-p { width: 100%; padding: 15px; background: var(--p); color: #000; border: none; border-radius: 15px; font-weight: 900; cursor: pointer; text-transform: uppercase; }

        /* ØµÙØ­Ø§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø¯Ø¹Ù… */
        .glass-card { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid var(--border); margin-bottom: 20px; }
        .theme-ball { width: 35px; height: 35px; border-radius: 50%; display: inline-block; cursor: pointer; margin: 0 5px; border: 3px solid #fff; box-shadow: 0 0 10px rgba(0,0,0,0.5); }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª */
        .level-badge { background: linear-gradient(45deg, #ffd700, #ffa500); color: #000; padding: 2px 10px; border-radius: 50px; font-size: 0.7rem; font-weight: 900; }

        /* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø§Ù„ */
        #article-view { position: fixed; inset: 0; background: var(--bg); z-index: 2000; display: none; overflow-y: auto; padding: 20px; backdrop-filter: blur(15px); }

        /* Ø£Ù„Ø¹Ø§Ø¨ */
        #game-board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 300px; margin: 20px auto; }
        .cell { aspect-ratio: 1; background: rgba(255,255,255,0.05); border: 1px solid var(--p); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; cursor: pointer; }
    </style>
</head>
<body id="main-body">
    <div id="particles-js"></div>

    <aside id="sidebar">
        <div style="padding: 40px 20px; text-align: center;">
            <h2 style="color:var(--p); letter-spacing: 4px;">ZOMERD</h2>
            <div id="user-rank" style="margin-top:10px;"></div>
        </div>
        <nav>
            <div class="nav-link active" onclick="nav('home', event)"><i class="fa fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
            <div id="adm-link" class="nav-link" style="display:none;" onclick="nav('write', event)"><i class="fa fa-plus-circle"></i> Ù†Ø´Ø± Ø®Ø¨Ø±</div>
            <div class="nav-link" onclick="nav('games', event)"><i class="fa fa-gamepad"></i> Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</div>
            <div class="nav-link" onclick="nav('settings', event)"><i class="fa fa-sliders"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
            <div class="nav-link" onclick="nav('contact', event)"><i class="fa fa-headset"></i> Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</div>
        </nav>
    </aside>

    <main>
        <div class="ticker-container">
            <div class="ticker-label">Ø¹Ø§Ø¬Ù„</div>
            <div class="ticker-wrapper"><div class="ticker-content" id="ticker"><span>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø²Ù…Ø±Ø¯.. Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..</span></div></div>
        </div>

        <header>
            <button class="menu-btn" onclick="toggleMenu()"><i class="fa fa-bars-staggered"></i></button>
            <div id="sec-title" style="font-weight:900; color:var(--p);">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
            <img id="u-head" style="width:38px; height:38px; border-radius:50%; border:2px solid var(--p); display:none; cursor:pointer;" onclick="nav('settings')">
        </header>

        <section id="sec-home" class="section active">
            <div class="search-container">
                <input type="text" id="search" oninput="render()" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ø®Ø¨Ø± Ø£Ùˆ ÙƒÙˆØ¯ Ù‡Ù†Ø§..." class="inp-field">
            </div>
            <div id="grid" class="posts-grid"></div>
        </section>

        <section id="sec-games" class="section">
            <div class="glass-card" style="text-align:center;">
                <h2>Ø§Ù„Ø¹Ø§Ø¨ Ù…ØµØºØ±Ø© ğŸ®</h2>
                <p>Ø§Ù„Ø¹Ø¨ ÙˆØ§Ø¬Ù…Ø¹ Ù†Ù‚Ø§Ø· Ø²Ù…Ø±Ø¯!</p>
                <div id="game-board">
                    <div class="cell" onclick="playTic(0)"></div><div class="cell" onclick="playTic(1)"></div><div class="cell" onclick="playTic(2)"></div>
                    <div class="cell" onclick="playTic(3)"></div><div class="cell" onclick="playTic(4)"></div><div class="cell" onclick="playTic(5)"></div>
                    <div class="cell" onclick="playTic(6)"></div><div class="cell" onclick="playTic(7)"></div><div class="cell" onclick="playTic(8)"></div>
                </div>
                <button onclick="resetGame()" class="btn-p" style="width:auto; padding:10px 20px;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
            </div>
        </section>

        <section id="sec-write" class="section">
            <div class="glass-card">
                <input type="text" id="p-title" class="inp-field" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„..">
                <input type="file" onchange="upImg(this)" class="inp-field">
                <div id="p-body" class="inp-field" contenteditable="true" style="min-height:250px;" placeholder="Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ.."></div>
                <button onclick="pub()" class="btn-p">Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± ÙÙˆØ±Ø§Ù‹</button>
            </div>
        </section>

        <section id="sec-settings" class="section">
            <div class="glass-card">
                <h3>ØªØºÙŠÙŠØ± Ù…Ø¸Ù‡Ø± Ø§Ù„Ù…Ù†ØµØ© (Theme)</h3><br>
                <div class="theme-ball" style="background:#00d2ff" onclick="setTheme('default')"></div>
                <div class="theme-ball" style="background:#a855f7" onclick="setTheme('purple')"></div>
                <div class="theme-ball" style="background:#fbbf24" onclick="setTheme('gold')"></div>
                <div class="theme-ball" style="background:#fff" onclick="setTheme('dark')"></div>
            </div>
            <div class="glass-card" id="user-card" style="text-align:center;">
                <p>Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</p><br>
                <button onclick="location.reload()" class="btn-p">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¬ÙˆØ¬Ù„</button>
            </div>
        </section>

        <section id="sec-contact" class="section">
            <div class="glass-card">
                <h3>Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</h3><br>
                <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø¨Ø±Ø§Ø¡ Ø¹Ù…Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ø­Ù„ Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø©.</p><br>
                <a href="https://wa.me/201273740256" class="btn-p" style="display:block; text-align:center; text-decoration:none;"><i class="fa-brands fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬</a>
                <br>
                <textarea class="inp-field" placeholder="Ø§Ø´Ø±Ø­ Ù…Ø´ÙƒÙ„ØªÙƒ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ù‡Ù†Ø§.." style="min-height:100px;"></textarea>
                <button onclick="alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ÙƒØŒ Ø³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨')" class="btn-p" style="background:rgba(255,255,255,0.1); color:#fff;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ°ÙƒØ±Ø©</button>
            </div>
        </section>
    </main>

    <div id="article-view">
        <div style="max-width:850px; margin:auto; background:var(--card); padding:30px; border-radius:25px; border:1px solid var(--border);">
            <button onclick="closeArt()" class="btn-p" style="width:auto; padding:5px 20px; margin-bottom:20px;">Ø±Ø¬ÙˆØ¹</button>
            <div id="art-data"></div>
            <div id="ai-summary" style="margin-top:20px; padding:15px; background:rgba(0,210,255,0.1); border-radius:15px; display:none;">
                <h4 style="color:var(--p)">âœ¨ ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</h4>
                <p id="summary-text" style="font-size:0.9rem; margin-top:5px;"></p>
            </div>
            <br>
            <button onclick="summarize()" class="btn-p" style="background:var(--grad); width:auto;">ØªØ®Ù„ÙŠØµ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAt16kYfN4cNHfTwbdr3KOGbcQJlmE45tg",
            authDomain: "zomerd-new.firebaseapp.com",
            projectId: "zomerd-new",
            storageBucket: "zomerd-new.firebasestorage.app",
            messagingSenderId: "52188666382",
            appId: "1:52188666382:web:7879a8c671af9329f67a5f"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        let user = JSON.parse(localStorage.getItem('zomerd_user')) || null;
        let posts = [];
        let tempImg = "";
        let points = parseInt(localStorage.getItem('z_points')) || 0;

        // Ø«ÙŠÙ…Ø§Øª
        function setTheme(n) {
            document.body.className = (n === 'default') ? '' : 'theme-' + n;
            localStorage.setItem('z_theme', n);
        }

        function init() {
            setTheme(localStorage.getItem('z_theme') || 'default');
            if(user) {
                document.getElementById('u-head').style.display = 'block';
                document.getElementById('u-head').src = user.picture;
                updateRank();
                document.getElementById('user-card').innerHTML = `
                    <img src="${user.picture}" style="width:90px; border-radius:50%; border:3px solid var(--p);"><br>
                    <h2 style="margin:10px 0;">${user.name}</h2>
                    <p style="opacity:0.6;">Ù†Ù‚Ø§Ø·Ùƒ: ${points}</p><br>
                    <button onclick="localStorage.clear(); location.reload();" class="btn-p" style="background:#ef4444; color:#fff;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
                `;
                if(user.email === "bo2584668@gmail.com") document.getElementById('adm-link').style.display='flex';
            }
            particlesJS('particles-js', { "particles": { "number": { "value": 35 }, "color": { "value": "#00d2ff" }, "move": { "speed": 1 } } });
            loadData();
        }

        function updateRank() {
            let rank = points > 500 ? "Ø¹Ø¶Ùˆ Ù…Ù„ÙƒÙŠ ğŸ‘‘" : points > 200 ? "Ø¹Ø¶Ùˆ Ø°Ù‡Ø¨ÙŠ â­" : "Ù…Ø³ØªÙƒØ´Ù ğŸ”";
            document.getElementById('user-rank').innerHTML = `<span class="level-badge">${rank}</span>`;
        }

        async function upImg(el) {
            const fd = new FormData(); fd.append("image", el.files[0]);
            const res = await fetch("https://api.imgbb.com/1/upload?key=22d566497cb5778087e8dd132dc8116d", { method: "POST", body: fd });
            const d = await res.json(); tempImg = d.data.url; alert("Ø§Ù„ØµÙˆØ±Ø© Ø¬Ø§Ù‡Ø²Ø©");
        }

        async function pub() {
            const t = document.getElementById('p-title').value;
            const b = document.getElementById('p-body').innerHTML;
            await db.collection("posts").add({ title: t, content: b, image: tempImg, views: 0, likes: 0, time: firebase.firestore.FieldValue.serverTimestamp() });
            alert("ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­!"); nav('home');
        }

        function loadData() {
            db.collection("posts").orderBy("time", "desc").onSnapshot(snap => {
                posts = []; let t = "";
                snap.forEach(doc => {
                    posts.push({id: doc.id, ...doc.data()});
                    t += `<span>âš¡ ${doc.data().title}</span>`;
                });
                document.getElementById('ticker').innerHTML = t;
                render();
            });
        }

        function render() {
            const grid = document.getElementById('grid');
            const term = document.getElementById('search').value.toLowerCase();
            grid.innerHTML = '';
            posts.filter(p => p.title.toLowerCase().includes(term)).forEach(p => {
                grid.innerHTML += `
                    <div class="post-card" onclick="openArt('${p.id}')">
                        <img src="${p.image}" class="post-img">
                        <div class="post-info">
                            <h4 style="color:#fff">${p.title}</h4>
                            <div style="font-size:0.75rem; color:var(--p); margin-top:10px;">ğŸ‘ï¸ ${p.views} Ù…Ø´Ø§Ù‡Ø¯Ø© | â¤ï¸ ${p.likes} Ø¥Ø¹Ø¬Ø§Ø¨</div>
                        </div>
                    </div>`;
            });
        }

        async function openArt(id) {
            const p = posts.find(x => x.id === id);
            db.collection("posts").doc(id).update({ views: firebase.firestore.FieldValue.increment(1) });
            points += 5; localStorage.setItem('z_points', points); updateRank();
            
            document.getElementById('art-data').innerHTML = `
                <img src="${p.image}" style="width:100%; border-radius:20px; margin-bottom:20px;">
                <h1>${p.title}</h1>
                <div id="full-text" style="margin-top:20px; line-height:1.9; color:#e2e8f0;">${p.content}</div>
                <br><button class="btn-p" onclick="alert('Ø´ÙƒØ±Ø§ Ù„ØªÙØ§Ø¹Ù„Ùƒ!')">â¤ï¸ Ø£Ø¹Ø¬Ø¨Ù†ÙŠ</button>
            `;
            document.getElementById('ai-summary').style.display='none';
            document.getElementById('article-view').style.display='block';
        }

        function summarize() {
            const text = document.getElementById('full-text').innerText;
            document.getElementById('summary-text').innerText = text.substring(0, 150) + "... (ØªÙ… Ø§Ù„ØªÙ„Ø®ÙŠØµ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø£Ù‡Ù… Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ø§Ù„Ø®Ø¨Ø±)";
            document.getElementById('ai-summary').style.display='block';
        }

        // Ù„Ø¹Ø¨Ø© Tic Tac Toe Ø¨Ø³ÙŠØ·Ø© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
        let board = ["","","","","","","","",""];
        function playTic(i) {
            if(board[i] === "") {
                board[i] = "X";
                document.querySelectorAll('.cell')[i].innerText = "X";
                points += 10; localStorage.setItem('z_points', points); updateRank();
            }
        }
        function resetGame() {
            board = ["","","","","","","","",""];
            document.querySelectorAll('.cell').forEach(c => c.innerText = "");
        }

        function closeArt() { document.getElementById('article-view').style.display='none'; }
        function toggleMenu() { document.getElementById('sidebar').classList.toggle('open'); }
        function nav(id, e) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById('sec-' + id).classList.add('active');
            if(e) e.currentTarget.classList.add('active');
            if(window.innerWidth < 768) toggleMenu();
        }

        window.onload = init;
    </script>
</body>
</html>
